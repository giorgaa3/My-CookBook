<section class="flex items-center justify-between gap-4 mb-6">
  <h1 class="text-2xl font-semibold">Discover Recipes</h1>
  <input type="search" [(ngModel)]="query" (input)="fetch()" placeholder="Search by title or ingredient..."
         class="px-3 py-2 w-72 border rounded-lg"/>
</section>

<div *ngIf="loading" class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6">
  <div *ngFor="let _ of [1,2,3,4,5,6]" class="h-64 bg-gray-100 animate-pulse rounded-xl"></div>
</div>

<div *ngIf="!loading && recipes.length === 0" class="text-center py-20">
  <p class="text-gray-500">No recipes found. <a routerLink="/recipes/new" class="text-tomato underline">Add the first one</a>.</p>
</div>

<div *ngIf="!loading && recipes.length" class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6">
  <article *ngFor="let r of recipes" class="bg-white rounded-xl shadow-card overflow-hidden hover:-translate-y-0.5 transition">
    <a [routerLink]="['/recipes', r.id]">
      <img [src]="r.thumbnail" [alt]="r.title" class="w-full h-40 object-cover">
    </a>
    <div class="p-4">
      <h3 class="font-semibold line-clamp-1">{{ r.title }}</h3>
      <p class="text-sm text-gray-600 line-clamp-2 mb-3">{{ r.description }}</p>
      <div class="flex items-center justify-between">
        <button (click)="toggleFav(r, $event)" class="px-3 py-1 rounded-full border hover:bg-gray-50">
          <span *ngIf="!r.favorite">♡ Favorite</span>
          <span *ngIf="r.favorite" class="text-tomato">♥ Favorited</span>
        </button>
        <a [routerLink]="['/recipes', r.id]" class="text-tomato hover:underline">View</a>
      </div>
    </div>
  </article>
</div>
