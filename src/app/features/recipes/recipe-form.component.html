<h1 class="text-2xl font-semibold mb-4">{{ isEdit ? 'Edit Recipe' : 'Add Recipe' }}</h1>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="bg-white p-5 rounded-xl border max-w-3xl space-y-4">
  <div>
    <label class="block text-sm font-medium mb-1">Title</label>
    <input formControlName="title" class="w-full px-3 py-2 border rounded-lg" placeholder="e.g., Classic Lasagna">
    <p *ngIf="fc('title').touched && fc('title').invalid" class="text-sm text-tomato mt-1">Title is required (min 3 chars).</p>
  </div>

  <div>
    <label class="block text-sm font-medium mb-1">Short Description</label>
    <textarea formControlName="description" rows="2" class="w-full px-3 py-2 border rounded-lg" placeholder="A quick summary..."></textarea>
    <p *ngIf="fc('description').touched && fc('description').invalid" class="text-sm text-tomato mt-1">Description is required (10â€“200 chars).</p>
  </div>

  <div>
    <label class="block text-sm font-medium mb-2">Ingredients</label>
    <div class="space-y-2">
      <div *ngFor="let ctrl of ings.controls; let i = index" class="flex items-center gap-2">
        <input [formControl]="ctrl" class="flex-1 px-3 py-2 border rounded-lg" placeholder="Ingredient">
        <button type="button" (click)="removeIng(i)" class="px-2 py-2 border rounded-lg">Remove</button>
      </div>
      <button type="button" (click)="addIng()" class="px-3 py-2 rounded-lg border">+ Add ingredient</button>
    </div>
  </div>

  <div>
    <label class="block text-sm font-medium mb-1">Instructions</label>
    <textarea formControlName="instructions" rows="6" class="w-full px-3 py-2 border rounded-lg" placeholder="Step 1...
Step 2..."></textarea>
    <p *ngIf="fc('instructions').touched && fc('instructions').invalid" class="text-sm text-tomato mt-1">Instructions are required (min 10 chars).</p>
  </div>

  <div>
    <label class="block text-sm font-medium mb-1">Thumbnail (URL or upload)</label>
    <div class="flex gap-2">
      <input formControlName="thumbnail" class="flex-1 px-3 py-2 border rounded-lg" placeholder="/assets/seed/pizza.jpg">
      <input type="file" accept="image/*" (change)="onFile($event)" class="px-3 py-2 border rounded-lg" />
    </div>
    <div *ngIf="preview" class="mt-3">
      <img [src]="preview" alt="preview" class="w-full max-w-sm rounded-xl border" />
    </div>
  </div>

  <div class="flex items-center gap-2 pt-2">
    <button [disabled]="form.invalid" class="px-4 py-2 rounded-lg bg-basil text-white disabled:opacity-50">{{ isEdit ? 'Save changes' : 'Create recipe' }}</button>
    <button type="button" (click)="cancel()" class="px-4 py-2 rounded-lg border">Cancel</button>
  </div>
</form>
